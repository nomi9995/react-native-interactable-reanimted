{"version":3,"sources":["index.js"],"names":["add","cond","diff","divide","eq","event","exp","lessThan","and","call","block","multiply","pow","set","abs","clockRunning","greaterOrEq","lessOrEq","sqrt","startClock","stopClock","sub","Clock","Value","onChange","Animated","ANIMATOR_PAUSE_CONSECUTIVE_FRAMES","ANIMATOR_PAUSE_ZERO_VELOCITY","DEFAULT_SNAP_TENSION","DEFAULT_SNAP_DAMPING","DEFAULT_GRAVITY_STRENGTH","DEFAULT_GRAVITY_FALLOF","sq","x","influenceAreaWithRadius","radius","anchor","left","right","top","y","bottom","snapTo","target","snapPoints","best","clb","dragClb","dist","snap","pt","tension","damping","snapDist","map","newDist","bx","by","forEach","index","undefined","nativeEvent","targetSnapPointId","id","state","springBehavior","dt","obj","dx","ax","mass","dy","ay","vx","vy","frictionBehavior","friction","anchorBehavior","gravityBehavior","strength","falloff","drsq","dr","a","div","bounceBehavior","area","bounce","xnodes","ynodes","flipx","flipy","push","withInfluence","behavior","testLeft","testRight","testTop","testBottom","testNodes","filter","t","test","withLimits","value","lowerBound","upperBound","result","Interactable","Component","constructor","props","update","animatedValueX","animatedValueY","clock","tossedTarget","initialPosition","dragToss","permBuckets","addSpring","influence","buckets","addFriction","addGravity","dragAnchor","dragBuckets","dragWithSpring","handleStartDrag","onDrag","snapBuckets","updateSnapTo","snapAnchor","onSnap","springPoints","influenceArea","gravityPoints","frictionAreas","boundaries","sortBuckets","specialBuckets","b","idx","reverse","reduce","acc","concat","dragBehaviors","snapBehaviors","noMovementFrames","verticalOnly","horizontalOnly","stopWhenNeeded","onStop","trans","axis","vaxis","dragging","start","drag","gesture","advance","last","Number","MAX_SAFE_INTEGER","noMoveFrameCount","testMovementFrames","step","State","ACTIVE","wrapStep","dragEnabled","_dragging","_velocity","doUpdateAnReturn","_position","_snapAnchor","_transX","_transY","_onGestureEvent","translationX","translationY","initialize","UNSAFE_componentWillReceiveProps","nextProps","_","isEqual","render","children","style","transform","translateX","translateY","setVelocity","setValue","snapPoint","changePosition","snapToPosition","View"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;AACA,MAAM;AACJA,EAAAA,GADI;AAEJC,EAAAA,IAFI;AAGJC,EAAAA,IAHI;AAIJC,EAAAA,MAJI;AAKJC,EAAAA,EALI;AAMJC,EAAAA,KANI;AAOJC,EAAAA,GAPI;AAQJC,EAAAA,QARI;AASJC,EAAAA,GATI;AAUJC,EAAAA,IAVI;AAWJC,EAAAA,KAXI;AAYJC,EAAAA,QAZI;AAaJC,EAAAA,GAbI;AAcJC,EAAAA,GAdI;AAeJC,EAAAA,GAfI;AAgBJC,EAAAA,YAhBI;AAiBJC,EAAAA,WAjBI;AAkBJC,EAAAA,QAlBI;AAmBJC,EAAAA,IAnBI;AAoBJC,EAAAA,UApBI;AAqBJC,EAAAA,SArBI;AAsBJC,EAAAA,GAtBI;AAuBJC,EAAAA,KAvBI;AAwBJC,EAAAA,KAxBI;AAyBJC,EAAAA;AAzBI,IA0BFC,8BA1BJ;AA4BA,MAAMC,iCAAiC,GAAG,EAA1C;AACA,MAAMC,4BAA4B,GAAG,CAArC;AACA,MAAMC,oBAAoB,GAAG,GAA7B;AACA,MAAMC,oBAAoB,GAAG,GAA7B;AACA,MAAMC,wBAAwB,GAAG,GAAjC;AACA,MAAMC,sBAAsB,GAAG,EAA/B;;AAEA,SAASC,EAAT,CAAYC,CAAZ,EAAe;AACb,SAAOtB,QAAQ,CAACsB,CAAD,EAAIA,CAAJ,CAAf;AACD;;AAED,SAASC,uBAAT,CAAiCC,MAAjC,EAAyCC,MAAzC,EAAiD;AAC/C,SAAO;AACLC,IAAAA,IAAI,EAAE,CAACD,MAAM,CAACH,CAAP,IAAY,CAAb,IAAkBE,MADnB;AAELG,IAAAA,KAAK,EAAE,CAACF,MAAM,CAACH,CAAP,IAAY,CAAb,IAAkBE,MAFpB;AAGLI,IAAAA,GAAG,EAAE,CAACH,MAAM,CAACI,CAAP,IAAY,CAAb,IAAkBL,MAHlB;AAILM,IAAAA,MAAM,EAAE,CAACL,MAAM,CAACI,CAAP,IAAY,CAAb,IAAkBL;AAJrB,GAAP;AAMD;;AAED,SAASO,MAAT,CAAgBC,MAAhB,EAAwBC,UAAxB,EAAoCC,IAApC,EAA0CC,GAA1C,EAA+CC,OAA/C,EAAwD;AACtD,QAAMC,IAAI,GAAG,IAAIzB,KAAJ,CAAU,CAAV,CAAb;;AACA,QAAM0B,IAAI,GAAIC,EAAD,IAAQ,CACnBrC,GAAG,CAACgC,IAAI,CAACM,OAAN,EAAeD,EAAE,CAACC,OAAH,IAAcvB,oBAA7B,CADgB,EAEnBf,GAAG,CAACgC,IAAI,CAACO,OAAN,EAAeF,EAAE,CAACE,OAAH,IAAcvB,oBAA7B,CAFgB,EAGnBhB,GAAG,CAACgC,IAAI,CAACZ,CAAN,EAASiB,EAAE,CAACjB,CAAH,IAAQ,CAAjB,CAHgB,EAInBpB,GAAG,CAACgC,IAAI,CAACL,CAAN,EAASU,EAAE,CAACV,CAAH,IAAQ,CAAjB,CAJgB,CAArB;;AAMA,QAAMa,QAAQ,GAAIH,EAAD,IACflD,GAAG,CAACgC,EAAE,CAACX,GAAG,CAACsB,MAAM,CAACV,CAAR,EAAWiB,EAAE,CAACjB,CAAH,IAAQ,CAAnB,CAAJ,CAAH,EAA+BD,EAAE,CAACX,GAAG,CAACsB,MAAM,CAACH,CAAR,EAAWU,EAAE,CAACV,CAAH,IAAQ,CAAnB,CAAJ,CAAjC,CADL;;AAEA,SAAO,CACL3B,GAAG,CAACmC,IAAD,EAAOK,QAAQ,CAACT,UAAU,CAAC,CAAD,CAAX,CAAf,CADE,EAEL,GAAGK,IAAI,CAACL,UAAU,CAAC,CAAD,CAAX,CAFF,EAGL,GAAGA,UAAU,CAACU,GAAX,CAAgBJ,EAAD,IAAQ;AACxB,UAAMK,OAAO,GAAGF,QAAQ,CAACH,EAAD,CAAxB;AACA,WAAOjD,IAAI,CAACM,QAAQ,CAACgD,OAAD,EAAUP,IAAV,CAAT,EAA0B,CAACnC,GAAG,CAACmC,IAAD,EAAOO,OAAP,CAAJ,EAAqB,GAAGN,IAAI,CAACC,EAAD,CAA5B,CAA1B,CAAX;AACD,GAHE,CAHE,EAOL,CAACJ,GAAG,IAAIC,OAAR,KACEtC,IAAI,CAAC,CAACoC,IAAI,CAACZ,CAAN,EAASY,IAAI,CAACL,CAAd,EAAiBG,MAAM,CAACV,CAAxB,EAA2BU,MAAM,CAACH,CAAlC,CAAD,EAAuC,CAAC,CAACgB,EAAD,EAAKC,EAAL,EAASxB,CAAT,EAAYO,CAAZ,CAAD,KAAoB;AAC7DI,IAAAA,UAAU,CAACc,OAAX,CAAmB,CAACR,EAAD,EAAKS,KAAL,KAAe;AAChC,UACE,CAACT,EAAE,CAACjB,CAAH,KAAS2B,SAAT,IAAsBV,EAAE,CAACjB,CAAH,KAASuB,EAAhC,MACCN,EAAE,CAACV,CAAH,KAASoB,SAAT,IAAsBV,EAAE,CAACV,CAAH,KAASiB,EADhC,CADF,EAGE;AACAX,QAAAA,GAAG,IAAIA,GAAG,CAAC;AAAEe,UAAAA,WAAW,EAAE,EAAE,GAAGX,EAAL;AAASS,YAAAA;AAAT;AAAf,SAAD,CAAV;AACAZ,QAAAA,OAAO,IACLA,OAAO,CAAC;AACNc,UAAAA,WAAW,EAAE;AAAE5B,YAAAA,CAAF;AAAKO,YAAAA,CAAL;AAAQsB,YAAAA,iBAAiB,EAAEZ,EAAE,CAACa,EAA9B;AAAkCC,YAAAA,KAAK,EAAE;AAAzC;AADP,SAAD,CADT;AAID;AACF,KAXD;AAYD,GAbG,CARD,CAAP;AAuBD;;AAED,SAASC,cAAT,CAAwBC,EAAxB,EAA4BvB,MAA5B,EAAoCwB,GAApC,EAAyC/B,MAAzC,EAAiDe,OAAO,GAAG,GAA3D,EAAgE;AAC9D,QAAMiB,EAAE,GAAG/C,GAAG,CAACsB,MAAM,CAACV,CAAR,EAAWG,MAAM,CAACH,CAAlB,CAAd;AACA,QAAMoC,EAAE,GAAGlE,MAAM,CAACQ,QAAQ,CAAC,CAAC,CAAF,EAAKwC,OAAL,EAAciB,EAAd,CAAT,EAA4BD,GAAG,CAACG,IAAhC,CAAjB;AACA,QAAMC,EAAE,GAAGlD,GAAG,CAACsB,MAAM,CAACH,CAAR,EAAWJ,MAAM,CAACI,CAAlB,CAAd;AACA,QAAMgC,EAAE,GAAGrE,MAAM,CAACQ,QAAQ,CAAC,CAAC,CAAF,EAAKwC,OAAL,EAAcoB,EAAd,CAAT,EAA4BJ,GAAG,CAACG,IAAhC,CAAjB;AACA,SAAO;AACLrC,IAAAA,CAAC,EAAEpB,GAAG,CAACsD,GAAG,CAACM,EAAL,EAASzE,GAAG,CAACmE,GAAG,CAACM,EAAL,EAAS9D,QAAQ,CAACuD,EAAD,EAAKG,EAAL,CAAjB,CAAZ,CADD;AAEL7B,IAAAA,CAAC,EAAE3B,GAAG,CAACsD,GAAG,CAACO,EAAL,EAAS1E,GAAG,CAACmE,GAAG,CAACO,EAAL,EAAS/D,QAAQ,CAACuD,EAAD,EAAKM,EAAL,CAAjB,CAAZ;AAFD,GAAP;AAID;;AAED,SAASG,gBAAT,CAA0BT,EAA1B,EAA8BvB,MAA9B,EAAsCwB,GAAtC,EAA2Cf,OAAO,GAAG,GAArD,EAA0D;AACxD,QAAMwB,QAAQ,GAAGhE,GAAG,CAACwC,OAAD,EAAUzC,QAAQ,CAAC,EAAD,EAAKuD,EAAL,CAAlB,CAApB;AACA,SAAO;AACLjC,IAAAA,CAAC,EAAEpB,GAAG,CAACsD,GAAG,CAACM,EAAL,EAAS9D,QAAQ,CAACwD,GAAG,CAACM,EAAL,EAASG,QAAT,CAAjB,CADD;AAELpC,IAAAA,CAAC,EAAE3B,GAAG,CAACsD,GAAG,CAACO,EAAL,EAAS/D,QAAQ,CAACwD,GAAG,CAACO,EAAL,EAASE,QAAT,CAAjB;AAFD,GAAP;AAID;;AAED,SAASC,cAAT,CAAwBX,EAAxB,EAA4BvB,MAA5B,EAAoCwB,GAApC,EAAyC/B,MAAzC,EAAiD;AAC/C,QAAMgC,EAAE,GAAG/C,GAAG,CAACe,MAAM,CAACH,CAAR,EAAWU,MAAM,CAACV,CAAlB,CAAd;AACA,QAAMsC,EAAE,GAAGlD,GAAG,CAACe,MAAM,CAACI,CAAR,EAAWG,MAAM,CAACH,CAAlB,CAAd;AACA,SAAO;AACLP,IAAAA,CAAC,EAAEpB,GAAG,CAACsD,GAAG,CAACM,EAAL,EAAStE,MAAM,CAACiE,EAAD,EAAKF,EAAL,CAAf,CADD;AAEL1B,IAAAA,CAAC,EAAE3B,GAAG,CAACsD,GAAG,CAACO,EAAL,EAASvE,MAAM,CAACoE,EAAD,EAAKL,EAAL,CAAf;AAFD,GAAP;AAID;;AAED,SAASY,eAAT,CACEZ,EADF,EAEEvB,MAFF,EAGEwB,GAHF,EAIE/B,MAJF,EAKE2C,QAAQ,GAAGjD,wBALb,EAMEkD,OAAO,GAAGjD,sBANZ,EAOE;AACA,QAAMqC,EAAE,GAAG/C,GAAG,CAACsB,MAAM,CAACV,CAAR,EAAWG,MAAM,CAACH,CAAlB,CAAd;AACA,QAAMsC,EAAE,GAAGlD,GAAG,CAACsB,MAAM,CAACH,CAAR,EAAWJ,MAAM,CAACI,CAAlB,CAAd;AACA,QAAMyC,IAAI,GAAGjF,GAAG,CAACgC,EAAE,CAACoC,EAAD,CAAH,EAASpC,EAAE,CAACuC,EAAD,CAAX,CAAhB;AACA,QAAMW,EAAE,GAAGhE,IAAI,CAAC+D,IAAD,CAAf;AACA,QAAME,CAAC,GAAGhF,MAAM,CACdQ,QAAQ,CAAC,CAAC,CAAF,EAAKoE,QAAL,EAAeG,EAAf,EAAmB5E,GAAG,CAACH,MAAM,CAACQ,QAAQ,CAAC,CAAC,GAAF,EAAOsE,IAAP,CAAT,EAAuBjD,EAAE,CAACgD,OAAD,CAAzB,CAAP,CAAtB,CADM,EAEdb,GAAG,CAACG,IAFU,CAAhB;AAIA,QAAMc,GAAG,GAAGjF,MAAM,CAACgF,CAAD,EAAID,EAAJ,CAAlB;AACA,SAAO;AACLjD,IAAAA,CAAC,EAAEhC,IAAI,CAACiF,EAAD,EAAKrE,GAAG,CAACsD,GAAG,CAACM,EAAL,EAASzE,GAAG,CAACmE,GAAG,CAACM,EAAL,EAAS9D,QAAQ,CAACuD,EAAD,EAAKE,EAAL,EAASgB,GAAT,CAAjB,CAAZ,CAAR,CADF;AAEL5C,IAAAA,CAAC,EAAEvC,IAAI,CAACiF,EAAD,EAAKrE,GAAG,CAACsD,GAAG,CAACO,EAAL,EAAS1E,GAAG,CAACmE,GAAG,CAACO,EAAL,EAAS/D,QAAQ,CAACuD,EAAD,EAAKK,EAAL,EAASa,GAAT,CAAjB,CAAZ,CAAR;AAFF,GAAP;AAID;;AAED,SAASC,cAAT,CAAwBnB,EAAxB,EAA4BvB,MAA5B,EAAoCwB,GAApC,EAAyCmB,IAAzC,EAA+CC,MAAM,GAAG,CAAxD,EAA2D;AACzD,QAAMC,MAAM,GAAG,EAAf;AACA,QAAMC,MAAM,GAAG,EAAf;AACA,QAAMC,KAAK,GAAG7E,GAAG,CAACsD,GAAG,CAACM,EAAL,EAAS9D,QAAQ,CAAC,CAAC,CAAF,EAAKwD,GAAG,CAACM,EAAT,EAAac,MAAb,CAAjB,CAAjB;AACA,QAAMI,KAAK,GAAG9E,GAAG,CAACsD,GAAG,CAACO,EAAL,EAAS/D,QAAQ,CAAC,CAAC,CAAF,EAAKwD,GAAG,CAACO,EAAT,EAAaa,MAAb,CAAjB,CAAjB;;AACA,MAAID,IAAI,CAACjD,IAAL,KAAcuB,SAAlB,EAA6B;AAC3B4B,IAAAA,MAAM,CAACI,IAAP,CAAY3F,IAAI,CAACO,GAAG,CAACJ,EAAE,CAACuC,MAAM,CAACV,CAAR,EAAWqD,IAAI,CAACjD,IAAhB,CAAH,EAA0B9B,QAAQ,CAAC4D,GAAG,CAACM,EAAL,EAAS,CAAT,CAAlC,CAAJ,EAAoDiB,KAApD,CAAhB;AACD;;AACD,MAAIJ,IAAI,CAAChD,KAAL,KAAesB,SAAnB,EAA8B;AAC5B4B,IAAAA,MAAM,CAACI,IAAP,CACE3F,IAAI,CAACO,GAAG,CAACJ,EAAE,CAACuC,MAAM,CAACV,CAAR,EAAWqD,IAAI,CAAChD,KAAhB,CAAH,EAA2B/B,QAAQ,CAAC,CAAD,EAAI4D,GAAG,CAACM,EAAR,CAAnC,CAAJ,EAAqDiB,KAArD,CADN;AAGD;;AACD,MAAIJ,IAAI,CAAC/C,GAAL,KAAaqB,SAAjB,EAA4B;AAC1B4B,IAAAA,MAAM,CAACI,IAAP,CAAY3F,IAAI,CAACO,GAAG,CAACJ,EAAE,CAACuC,MAAM,CAACH,CAAR,EAAW8C,IAAI,CAAC/C,GAAhB,CAAH,EAAyBhC,QAAQ,CAAC4D,GAAG,CAACO,EAAL,EAAS,CAAT,CAAjC,CAAJ,EAAmDiB,KAAnD,CAAhB;AACD;;AACD,MAAIL,IAAI,CAAC7C,MAAL,KAAgBmB,SAApB,EAA+B;AAC7B4B,IAAAA,MAAM,CAACI,IAAP,CACE3F,IAAI,CAACO,GAAG,CAACJ,EAAE,CAACuC,MAAM,CAACH,CAAR,EAAW8C,IAAI,CAAC7C,MAAhB,CAAH,EAA4BlC,QAAQ,CAAC,CAAD,EAAI4D,GAAG,CAACO,EAAR,CAApC,CAAJ,EAAsDiB,KAAtD,CADN;AAGD;;AACD,SAAO;AACL1D,IAAAA,CAAC,EAAEuD,MADE;AAELhD,IAAAA,CAAC,EAAEiD;AAFE,GAAP;AAID;;AAED,SAASI,aAAT,CAAuBP,IAAvB,EAA6B3C,MAA7B,EAAqCmD,QAArC,EAA+C;AAC7C,MAAI,CAACR,IAAL,EAAW;AACT,WAAOQ,QAAP;AACD;;AACD,QAAMC,QAAQ,GAAGT,IAAI,CAACjD,IAAL,KAAcuB,SAAd,IAA2B3C,QAAQ,CAACqE,IAAI,CAACjD,IAAN,EAAYM,MAAM,CAACV,CAAnB,CAApD;AACA,QAAM+D,SAAS,GAAGV,IAAI,CAAChD,KAAL,KAAesB,SAAf,IAA4B3C,QAAQ,CAAC0B,MAAM,CAACV,CAAR,EAAWqD,IAAI,CAAChD,KAAhB,CAAtD;AACA,QAAM2D,OAAO,GAAGX,IAAI,CAAC/C,GAAL,KAAaqB,SAAb,IAA0B3C,QAAQ,CAACqE,IAAI,CAAC/C,GAAN,EAAWI,MAAM,CAACH,CAAlB,CAAlD;AACA,QAAM0D,UAAU,GACdZ,IAAI,CAAC7C,MAAL,KAAgBmB,SAAhB,IAA6B3C,QAAQ,CAAC0B,MAAM,CAACH,CAAR,EAAW8C,IAAI,CAAC7C,MAAhB,CADvC;AAEA,QAAM0D,SAAS,GAAG,CAACJ,QAAD,EAAWC,SAAX,EAAsBC,OAAtB,EAA+BC,UAA/B,EAA2CE,MAA3C,CACfC,CAAD,IAAOA,CAAC,KAAK,IADG,CAAlB;AAGA,QAAMC,IAAI,GAAG9F,GAAG,CAAC,GAAG2F,SAAJ,CAAhB;AACA,SAAO;AACLlE,IAAAA,CAAC,EAAEhC,IAAI,CAACqG,IAAD,EAAOR,QAAQ,CAAC7D,CAAhB,CADF;AAELO,IAAAA,CAAC,EAAEvC,IAAI,CAACqG,IAAD,EAAOR,QAAQ,CAACtD,CAAhB;AAFF,GAAP;AAID;;AAED,SAAS+D,UAAT,CAAoBC,KAApB,EAA2BC,UAA3B,EAAuCC,UAAvC,EAAmD;AACjD,MAAIC,MAAM,GAAGH,KAAb;;AACA,MAAIC,UAAU,KAAK7C,SAAnB,EAA8B;AAC5B+C,IAAAA,MAAM,GAAG1G,IAAI,CAACM,QAAQ,CAACiG,KAAD,EAAQC,UAAR,CAAT,EAA8BA,UAA9B,EAA0CE,MAA1C,CAAb;AACD;;AACD,MAAID,UAAU,KAAK9C,SAAnB,EAA8B;AAC5B+C,IAAAA,MAAM,GAAG1G,IAAI,CAACM,QAAQ,CAACmG,UAAD,EAAaF,KAAb,CAAT,EAA8BE,UAA9B,EAA0CC,MAA1C,CAAb;AACD;;AACD,SAAOA,MAAP;AACD;;AAED,MAAMC,YAAN,SAA2BC,gBAA3B,CAAqC;AAOnCC,EAAAA,WAAW,CAACC,MAAD,EAAQ;AACjB,UAAMA,MAAN;;AADiB,wCAiCLA,KAAD,IAAW;AACtB,YAAMC,MAAM,GAAG;AACb/E,QAAAA,CAAC,EAAE8E,KAAK,CAACE,cADI;AAEbzE,QAAAA,CAAC,EAAEuE,KAAK,CAACG;AAFI,OAAf;AAKA,YAAMC,KAAK,GAAG,IAAI7F,KAAJ,EAAd;AAEA,YAAM4C,EAAE,GAAG/D,MAAM,CAACD,IAAI,CAACiH,KAAD,CAAL,EAAc,IAAd,CAAjB;AAEA,YAAMhD,GAAG,GAAG;AACVM,QAAAA,EAAE,EAAE,IAAIlD,KAAJ,CAAU,CAAV,CADM;AAEVmD,QAAAA,EAAE,EAAE,IAAInD,KAAJ,CAAU,CAAV,CAFM;AAGV+C,QAAAA,IAAI,EAAE;AAHI,OAAZ;AAMA,YAAM8C,YAAY,GAAG;AACnBnF,QAAAA,CAAC,EAAEjC,GAAG,CACJ,IAAIuB,KAAJ,CAAUwF,KAAK,CAACM,eAAN,CAAsBpF,CAAtB,IAA2B,CAArC,CADI,EAEJtB,QAAQ,CAACoG,KAAK,CAACO,QAAP,EAAiBnD,GAAG,CAACM,EAArB,CAFJ,CADa;AAKnBjC,QAAAA,CAAC,EAAExC,GAAG,CAAC,KAAK2C,MAAL,CAAYH,CAAb,EAAgB7B,QAAQ,CAACoG,KAAK,CAACO,QAAP,EAAiBnD,GAAG,CAACO,EAArB,CAAxB;AALa,OAArB;AAQA,YAAM6C,WAAW,GAAG,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAApB;;AAEA,YAAMC,SAAS,GAAG,CAACpF,MAAD,EAASe,OAAT,EAAkBsE,SAAlB,EAA6BC,OAAO,GAAGH,WAAvC,KAAuD;AACvEG,QAAAA,OAAO,CAAC,CAAD,CAAP,CAAW9B,IAAX,CACEC,aAAa,CACX4B,SADW,EAEX,KAAK9E,MAFM,EAGXsB,cAAc,CAACC,EAAD,EAAK,KAAKvB,MAAV,EAAkBwB,GAAlB,EAAuB/B,MAAvB,EAA+Be,OAA/B,CAHH,CADf;AAOD,OARD;;AAUA,YAAMwE,WAAW,GAAG,CAACvE,OAAD,EAAUqE,SAAV,EAAqBC,OAAO,GAAGH,WAA/B,KAA+C;AACjEG,QAAAA,OAAO,CAAC,CAAD,CAAP,CAAW9B,IAAX,CACEC,aAAa,CACX4B,SADW,EAEX,KAAK9E,MAFM,EAGXgC,gBAAgB,CAACT,EAAD,EAAK,KAAKvB,MAAV,EAAkBwB,GAAlB,EAAuBf,OAAvB,CAHL,CADf;AAOD,OARD;;AAUA,YAAMwE,UAAU,GAAG,CACjBxF,MADiB,EAEjB2C,QAFiB,EAGjBC,OAHiB,EAIjByC,SAJiB,EAKjBC,OAAO,GAAGH,WALO,KAMd;AACHG,QAAAA,OAAO,CAAC,CAAD,CAAP,CAAW9B,IAAX,CACEC,aAAa,CACX4B,SADW,EAEX,KAAK9E,MAFM,EAGXmC,eAAe,CAACZ,EAAD,EAAK,KAAKvB,MAAV,EAAkBwB,GAAlB,EAAuB/B,MAAvB,EAA+B2C,QAA/B,EAAyCC,OAAzC,CAHJ,CADf;AAOD,OAdD;;AAgBA,YAAM6C,UAAU,GAAG;AAAE5F,QAAAA,CAAC,EAAE,IAAIV,KAAJ,CAAU,CAAV,CAAL;AAAmBiB,QAAAA,CAAC,EAAE,IAAIjB,KAAJ,CAAU,CAAV;AAAtB,OAAnB;AACA,YAAMuG,WAAW,GAAG,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAApB;;AACA,UAAIf,KAAK,CAACgB,cAAV,EAA0B;AACxB,cAAM;AAAE5E,UAAAA,OAAF;AAAWC,UAAAA;AAAX,YAAuB2D,KAAK,CAACgB,cAAnC;AACAP,QAAAA,SAAS,CAACK,UAAD,EAAa1E,OAAb,EAAsB,IAAtB,EAA4B2E,WAA5B,CAAT;AACAH,QAAAA,WAAW,CAACvE,OAAD,EAAU,IAAV,EAAgB0E,WAAhB,CAAX;AACD,OAJD,MAIO;AACLA,QAAAA,WAAW,CAAC,CAAD,CAAX,CAAelC,IAAf,CAAoBf,cAAc,CAACX,EAAD,EAAK,KAAKvB,MAAV,EAAkBwB,GAAlB,EAAuB0D,UAAvB,CAAlC;AACD;;AAED,YAAMG,eAAe,GACnBjB,KAAK,CAACkB,MAAN,IACAxH,IAAI,CAAC,CAAC,KAAKkC,MAAL,CAAYV,CAAb,EAAgB,KAAKU,MAAL,CAAYH,CAA5B,CAAD,EAAiC,CAAC,CAACP,CAAD,EAAIO,CAAJ,CAAD,KACnCuE,KAAK,CAACkB,MAAN,CAAa;AAAEpE,QAAAA,WAAW,EAAE;AAAE5B,UAAAA,CAAF;AAAKO,UAAAA,CAAL;AAAQwB,UAAAA,KAAK,EAAE;AAAf;AAAf,OAAb,CADE,CAFN;AAMA,YAAMkE,WAAW,GAAG,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CAApB;AAEA,YAAMC,YAAY,GAAGzF,MAAM,CACzB0E,YADyB,EAEzBL,KAAK,CAACnE,UAFmB,EAGzB,KAAKwF,UAHoB,EAIzBrB,KAAK,CAACsB,MAJmB,EAKzBtB,KAAK,CAACkB,MALmB,CAA3B;AAQAT,MAAAA,SAAS,CAAC,KAAKY,UAAN,EAAkB,KAAKA,UAAL,CAAgBjF,OAAlC,EAA2C,IAA3C,EAAiD+E,WAAjD,CAAT;AACAP,MAAAA,WAAW,CAAC,KAAKS,UAAL,CAAgBhF,OAAjB,EAA0B,IAA1B,EAAgC8E,WAAhC,CAAX;;AAEA,UAAInB,KAAK,CAACuB,YAAV,EAAwB;AACtBvB,QAAAA,KAAK,CAACuB,YAAN,CAAmB5E,OAAnB,CAA4BR,EAAD,IAAQ;AACjCsE,UAAAA,SAAS,CAACtE,EAAD,EAAKA,EAAE,CAACC,OAAR,EAAiBD,EAAE,CAACqF,aAApB,CAAT;;AACA,cAAIrF,EAAE,CAACE,OAAP,EAAgB;AACduE,YAAAA,WAAW,CAACzE,EAAE,CAACE,OAAJ,EAAaF,EAAE,CAACqF,aAAhB,CAAX;AACD;AACF,SALD;AAMD;;AACD,UAAIxB,KAAK,CAACyB,aAAV,EAAyB;AACvBzB,QAAAA,KAAK,CAACyB,aAAN,CAAoB9E,OAApB,CAA6BR,EAAD,IAAQ;AAClC,gBAAM8B,OAAO,GAAG9B,EAAE,CAAC8B,OAAH,IAAcjD,sBAA9B;AACA6F,UAAAA,UAAU,CAAC1E,EAAD,EAAKA,EAAE,CAAC6B,QAAR,EAAkBC,OAAlB,EAA2B9B,EAAE,CAACqF,aAA9B,CAAV;;AACA,cAAIrF,EAAE,CAACE,OAAP,EAAgB;AACd,kBAAMmF,aAAa,GACjBrF,EAAE,CAACqF,aAAH,IAAoBrG,uBAAuB,CAAC,MAAM8C,OAAP,EAAgB9B,EAAhB,CAD7C;AAEAyE,YAAAA,WAAW,CAACzE,EAAE,CAACE,OAAJ,EAAamF,aAAb,CAAX;AACD;AACF,SARD;AASD;;AACD,UAAIxB,KAAK,CAAC0B,aAAV,EAAyB;AACvB1B,QAAAA,KAAK,CAAC0B,aAAN,CAAoB/E,OAApB,CAA6BR,EAAD,IAAQ;AAClCyE,UAAAA,WAAW,CAACzE,EAAE,CAACE,OAAJ,EAAaF,EAAE,CAACqF,aAAhB,CAAX;AACD,SAFD;AAGD;;AACD,UAAIxB,KAAK,CAAC2B,UAAV,EAAsB;AACpBR,QAAAA,WAAW,CAAC,CAAD,CAAX,CAAetC,IAAf,CACEP,cAAc,CACZnB,EADY,EAEZ,KAAKvB,MAFO,EAGZwB,GAHY,EAIZ4C,KAAK,CAAC2B,UAJM,EAKZ3B,KAAK,CAAC2B,UAAN,CAAiBnD,MALL,CADhB;AASD,OA7HqB,CA+HtB;AACA;AACA;;;AACA,YAAMoD,WAAW,GAAIC,cAAD,KAAqB;AACvC3G,QAAAA,CAAC,EAAE2G,cAAc,CACdtF,GADA,CACI,CAACuF,CAAD,EAAIC,GAAJ,KAAY,CAAC,GAAGvB,WAAW,CAACuB,GAAD,CAAf,EAAsB,GAAGD,CAAzB,EAA4BE,OAA5B,GAAsCzF,GAAtC,CAA2CuF,CAAD,IAAOA,CAAC,CAAC5G,CAAnD,CADhB,EAEA+G,MAFA,CAEO,CAACC,GAAD,EAAMJ,CAAN,KAAYI,GAAG,CAACC,MAAJ,CAAWL,CAAX,CAFnB,EAEkC,EAFlC,CADoC;AAIvCrG,QAAAA,CAAC,EAAEoG,cAAc,CACdtF,GADA,CACI,CAACuF,CAAD,EAAIC,GAAJ,KAAY,CAAC,GAAGvB,WAAW,CAACuB,GAAD,CAAf,EAAsB,GAAGD,CAAzB,EAA4BE,OAA5B,GAAsCzF,GAAtC,CAA2CuF,CAAD,IAAOA,CAAC,CAACrG,CAAnD,CADhB,EAEAwG,MAFA,CAEO,CAACC,GAAD,EAAMJ,CAAN,KAAYI,GAAG,CAACC,MAAJ,CAAWL,CAAX,CAFnB,EAEkC,EAFlC;AAJoC,OAArB,CAApB;;AAQA,YAAMM,aAAa,GAAGR,WAAW,CAACb,WAAD,CAAjC;AACA,YAAMsB,aAAa,GAAGT,WAAW,CAACT,WAAD,CAAjC;AAEA,YAAMmB,gBAAgB,GAAG;AACvBpH,QAAAA,CAAC,EAAE,IAAIV,KAAJ,CACDwF,KAAK,CAACuC,YAAN,GAAqB5H,iCAAiC,GAAG,CAAzD,GAA6D,CAD5D,CADoB;AAIvBc,QAAAA,CAAC,EAAE,IAAIjB,KAAJ,CACDwF,KAAK,CAACwC,cAAN,GAAuB7H,iCAAiC,GAAG,CAA3D,GAA+D,CAD9D;AAJoB,OAAzB;AASA,YAAM8H,cAAc,GAAGvJ,IAAI,CACzBO,GAAG,CACDQ,WAAW,CAACqI,gBAAgB,CAACpH,CAAlB,EAAqBP,iCAArB,CADV,EAEDV,WAAW,CAACqI,gBAAgB,CAAC7G,CAAlB,EAAqBd,iCAArB,CAFV,CADsB,EAKzB,CACEqF,KAAK,CAAC0C,MAAN,GACIxJ,IAAI,CACFc,YAAY,CAACoG,KAAD,CADV,EAEF1G,IAAI,CAAC,CAAC,KAAKkC,MAAL,CAAYV,CAAb,EAAgB,KAAKU,MAAL,CAAYH,CAA5B,CAAD,EAAiC,CAAC,CAACP,CAAD,EAAIO,CAAJ,CAAD,KACnCuE,KAAK,CAAC0C,MAAN,CAAa;AAAE5F,QAAAA,WAAW,EAAE;AAAE5B,UAAAA,CAAF;AAAKO,UAAAA;AAAL;AAAf,OAAb,CADE,CAFF,CADR,GAOIoB,SARN,EASExC,SAAS,CAAC+F,KAAD,CATX,CALyB,EAgBzBhG,UAAU,CAACgG,KAAD,CAhBe,CAA3B;;AAmBA,YAAMuC,KAAK,GAAG,CAACC,IAAD,EAAOC,KAAP,EAAcnD,UAAd,EAA0BC,UAA1B,KAAyC;AACrD,cAAMmD,QAAQ,GAAG,IAAItI,KAAJ,CAAU,CAAV,CAAjB;AACA,cAAMuI,KAAK,GAAG,IAAIvI,KAAJ,CAAU,CAAV,CAAd;AACA,cAAMU,CAAC,GAAG,KAAKU,MAAL,CAAYgH,IAAZ,CAAV;AACA,cAAMlF,EAAE,GAAGN,GAAG,CAACyF,KAAD,CAAd;AACA,cAAMxH,MAAM,GAAGyF,UAAU,CAAC8B,IAAD,CAAzB;AACA,cAAMI,IAAI,GAAG,KAAKC,OAAL,CAAaL,IAAb,CAAb;AACA,YAAIM,OAAO,GAAGhK,IAAI,CAChBM,QAAQ,CAACO,GAAG,CAAC2D,EAAD,CAAJ,EAAU9C,4BAAV,CADQ,EAEhBM,CAFgB,EAGhBjC,GAAG,CAACiC,CAAD,EAAItB,QAAQ,CAAC8D,EAAD,EAAKP,EAAL,CAAZ,CAHa,CAAlB;;AAKA,YAAI6C,KAAK,CAAC2B,UAAV,EAAsB;AACpBuB,UAAAA,OAAO,GAAG1D,UAAU,CAClB0D,OADkB,EAElBlD,KAAK,CAAC2B,UAAN,CAAiBjC,UAAjB,CAFkB,EAGlBM,KAAK,CAAC2B,UAAN,CAAiBhC,UAAjB,CAHkB,CAApB;AAKD;;AACD,cAAMwD,IAAI,GAAG,IAAI3I,KAAJ,CAAU4I,MAAM,CAACC,gBAAjB,CAAb;AACA,cAAMC,gBAAgB,GAAGhB,gBAAgB,CAACM,IAAD,CAAzC;AACA,cAAMW,kBAAkB,GAAG5J,KAAK,CAAC,CAC/Bc,QAAQ,CAAC,KAAK4G,UAAL,CAAgBnG,CAAjB,EAAoBpB,GAAG,CAACqJ,IAAD,EAAOC,MAAM,CAACC,gBAAd,CAAvB,CADuB,EAE/B5I,QAAQ,CAAC,KAAK4G,UAAL,CAAgB5F,CAAjB,EAAoB3B,GAAG,CAACqJ,IAAD,EAAOC,MAAM,CAACC,gBAAd,CAAvB,CAFuB,EAG/BnK,IAAI,CACFG,EAAE,CAAC6J,OAAD,EAAUC,IAAV,CADA,EAEFrJ,GAAG,CAACwJ,gBAAD,EAAmBrK,GAAG,CAACqK,gBAAD,EAAmB,CAAnB,CAAtB,CAFD,EAGF,CAACxJ,GAAG,CAACqJ,IAAD,EAAOD,OAAP,CAAJ,EAAqBpJ,GAAG,CAACwJ,gBAAD,EAAmB,CAAnB,CAAxB,CAHE,CAH2B,CAAD,CAAhC;AASA,cAAME,IAAI,GAAGtK,IAAI,CACfG,EAAE,CAAC,KAAK4D,KAAN,EAAawG,iCAAMC,MAAnB,CADa,EAEf,CACExK,IAAI,CAAC4J,QAAD,EAAW,CAAX,EAAc,CAChB7B,eADgB,EAEhB7G,UAAU,CAACgG,KAAD,CAFM,EAGhBtG,GAAG,CAACgJ,QAAD,EAAW,CAAX,CAHa,EAIhBhJ,GAAG,CAACiJ,KAAD,EAAQ7H,CAAR,CAJa,CAAd,CADN,EAOEpB,GAAG,CAACuB,MAAD,EAASpC,GAAG,CAAC8J,KAAD,EAAQC,IAAR,CAAZ,CAPL,EAQE9J,IAAI,CAACiE,EAAD,EAAKiF,aAAa,CAACQ,IAAD,CAAlB,CARN,CAFe,EAYf,CACE1J,IAAI,CAAC4J,QAAD,EAAW,CAAC1B,YAAD,EAAetH,GAAG,CAACgJ,QAAD,EAAW,CAAX,CAAlB,CAAX,CADN,EAEE5J,IAAI,CAACiE,EAAD,EAAKkF,aAAa,CAACO,IAAD,CAAlB,CAFN,EAGEW,kBAHF,EAIEd,cAJF,CAZe,CAAjB;AAmBA,cAAMkB,QAAQ,GAAG3D,KAAK,CAAC4D,WAAN,GACb1K,IAAI,CAAC8G,KAAK,CAAC4D,WAAP,EAAoBJ,IAApB,EAA0B,CAAC1J,GAAG,CAACgJ,QAAD,EAAW,CAAX,CAAJ,EAAmBzI,SAAS,CAAC+F,KAAD,CAA5B,CAA1B,CADS,GAEboD,IAFJ,CAjDqD,CAqDrD;;AACA,aAAKK,SAAL,CAAejB,IAAf,IAAuBE,QAAvB;AACA,aAAKgB,SAAL,CAAelB,IAAf,IAAuBlF,EAAvB,CAvDqD,CAyDrD;;AACA,cAAMqG,gBAAgB,GAAG9D,MAAM,CAAC2C,IAAD,CAAN,GAAe9I,GAAG,CAACmG,MAAM,CAAC2C,IAAD,CAAP,EAAe1H,CAAf,CAAlB,GAAsCA,CAA/D;AAEA,eAAOvB,KAAK,CAAC,CAACgK,QAAD,EAAW7J,GAAG,CAACoB,CAAD,EAAIgI,OAAJ,CAAd,EAA4Ba,gBAA5B,CAAD,CAAZ;AACD,OA7DD,CAzKsB,CAwOtB;;;AACA,WAAKF,SAAL,GAAiB,EAAjB;AACA,WAAKC,SAAL,GAAiB,EAAjB;AACA,WAAKE,SAAL,GAAiB,KAAKpI,MAAtB;AACA,WAAKqI,WAAL,GAAmB,KAAK5C,UAAxB;AAEA,WAAK6C,OAAL,GAAevB,KAAK,CAAC,GAAD,EAAM,IAAN,EAAY,MAAZ,EAAoB,OAApB,CAApB;AACA,WAAKwB,OAAL,GAAexB,KAAK,CAAC,GAAD,EAAM,IAAN,EAAY,KAAZ,EAAmB,QAAnB,CAApB;AACD,KAjRkB;;AAEjB,SAAKM,OAAL,GAAe;AAAE/H,MAAAA,CAAC,EAAE,IAAIV,KAAJ,CAAU,CAAV,CAAL;AAAmBiB,MAAAA,CAAC,EAAE,IAAIjB,KAAJ,CAAU,CAAV;AAAtB,KAAf;AACA,SAAKyC,KAAL,GAAa,IAAIzC,KAAJ,CAAU,CAAC,CAAX,CAAb;AACA,SAAK4J,eAAL,GAAuB9K,KAAK,CAAC,CAC3B;AACEwD,MAAAA,WAAW,EAAE;AACXuH,QAAAA,YAAY,EAAE,KAAKpB,OAAL,CAAa/H,CADhB;AAEXoJ,QAAAA,YAAY,EAAE,KAAKrB,OAAL,CAAaxH,CAFhB;AAGXwB,QAAAA,KAAK,EAAE,KAAKA;AAHD;AADf,KAD2B,CAAD,CAA5B;AASA,SAAKrB,MAAL,GAAc;AACZV,MAAAA,CAAC,EAAE,IAAIV,KAAJ,CAAUwF,MAAK,CAACM,eAAN,CAAsBpF,CAAtB,IAA2B,CAArC,CADS;AAEZO,MAAAA,CAAC,EAAE,IAAIjB,KAAJ,CAAUwF,MAAK,CAACM,eAAN,CAAsB7E,CAAtB,IAA2B,CAArC;AAFS,KAAd;AAIA,SAAK4F,UAAL,GAAkB;AAChBnG,MAAAA,CAAC,EAAE,IAAIV,KAAJ,CAAUwF,MAAK,CAACM,eAAN,CAAsBpF,CAAtB,IAA2B,CAArC,CADa;AAEhBO,MAAAA,CAAC,EAAE,IAAIjB,KAAJ,CAAUwF,MAAK,CAACM,eAAN,CAAsB7E,CAAtB,IAA2B,CAArC,CAFa;AAGhBW,MAAAA,OAAO,EAAE,IAAI5B,KAAJ,CAAUK,oBAAV,CAHO;AAIhBwB,MAAAA,OAAO,EAAE,IAAI7B,KAAJ,CAAUM,oBAAV;AAJO,KAAlB;AAOA,SAAKyJ,UAAL,CAAgBvE,MAAhB;AACD;;AAEDwE,EAAAA,gCAAgC,CAACC,SAAD,EAAY;AAC1C,QAAI,CAACC,gBAAEC,OAAF,CAAUF,SAAS,CAAC5I,UAApB,EAAgC,KAAKmE,KAAL,CAAWnE,UAA3C,CAAL,EAA6D;AAC3D,WAAK0I,UAAL,CAAgBE,SAAhB;AACD;AACF;;AAoPDG,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEC,MAAAA,QAAF;AAAYC,MAAAA,KAAZ;AAAmBtC,MAAAA,cAAnB;AAAmCD,MAAAA;AAAnC,QAAoD,KAAKvC,KAA/D;AACA,wBACE,6BAAC,4CAAD;AACE,MAAA,WAAW,EAAE,CADf;AAEE,MAAA,OAAO,EAAE,EAFX;AAGE,MAAA,OAAO,EAAE,KAAKA,KAAL,CAAW4D,WAHtB;AAIE,MAAA,cAAc,EAAE,KAAKQ,eAJvB;AAKE,MAAA,oBAAoB,EAAE,KAAKA;AAL7B,oBAOE,6BAAC,8BAAD,CAAU,IAAV;AACE,MAAA,KAAK,EAAE,CACLU,KADK,EAEL;AACEC,QAAAA,SAAS,EAAE,CACT;AAAEC,UAAAA,UAAU,EAAEzC,YAAY,GAAG,CAAH,GAAO,KAAK2B;AAAtC,SADS,EAET;AAAEe,UAAAA,UAAU,EAAEzC,cAAc,GAAG,CAAH,GAAO,KAAK2B;AAAxC,SAFS;AADb,OAFK;AADT,OAWGU,QAXH,CAPF,CADF;AAuBD,GAnTkC,CAqTnC;;;AACAK,EAAAA,WAAW,CAAC;AAAEhK,IAAAA,CAAF;AAAKO,IAAAA;AAAL,GAAD,EAAW;AACpB,QAAIP,CAAC,KAAK2B,SAAV,EAAqB;AACnB,WAAKgH,SAAL,CAAe3I,CAAf,CAAiBiK,QAAjB,CAA0B,CAA1B;;AACA,WAAKrB,SAAL,CAAe5I,CAAf,CAAiBiK,QAAjB,CAA0BjK,CAA1B;AACD;;AACD,QAAIO,CAAC,KAAKoB,SAAV,EAAqB;AACnB,WAAKgH,SAAL,CAAepI,CAAf,CAAiB0J,QAAjB,CAA0B,CAA1B;;AACA,WAAKrB,SAAL,CAAerI,CAAf,CAAiB0J,QAAjB,CAA0B1J,CAA1B;AACD;AACF;;AAEDE,EAAAA,MAAM,CAAC;AAAEiB,IAAAA;AAAF,GAAD,EAAY;AAChB,UAAMwI,SAAS,GAAG,KAAKpF,KAAL,CAAWnE,UAAX,CAAsBe,KAAtB,CAAlB;;AACA,SAAKqH,WAAL,CAAiB7H,OAAjB,CAAyB+I,QAAzB,CACEC,SAAS,CAAChJ,OAAV,IAAqBvB,oBADvB;;AAGA,SAAKoJ,WAAL,CAAiB5H,OAAjB,CAAyB8I,QAAzB,CACEC,SAAS,CAAC/I,OAAV,IAAqBvB,oBADvB;;AAGA,SAAKmJ,WAAL,CAAiB/I,CAAjB,CAAmBiK,QAAnB,CAA4BC,SAAS,CAAClK,CAAV,IAAe,CAA3C;;AACA,SAAK+I,WAAL,CAAiBxI,CAAjB,CAAmB0J,QAAnB,CAA4BC,SAAS,CAAC3J,CAAV,IAAe,CAA3C;;AACA,SAAKuE,KAAL,CAAWsB,MAAX,IACE,KAAKtB,KAAL,CAAWsB,MAAX,CAAkB;AAAExE,MAAAA,WAAW,EAAE,EAAE,GAAGsI,SAAL;AAAgBxI,QAAAA;AAAhB;AAAf,KAAlB,CADF;AAED;;AAEDyI,EAAAA,cAAc,CAAC;AAAEnK,IAAAA,CAAF;AAAKO,IAAAA;AAAL,GAAD,EAAW;AACvB,QAAIP,CAAC,KAAK2B,SAAV,EAAqB;AACnB,WAAKgH,SAAL,CAAe3I,CAAf,CAAiBiK,QAAjB,CAA0B,CAA1B;;AACA,WAAKnB,SAAL,CAAe9I,CAAf,CAAiBiK,QAAjB,CAA0BjK,CAA1B;AACD;;AACD,QAAIO,CAAC,KAAKoB,SAAV,EAAqB;AACnB,WAAKgH,SAAL,CAAe3I,CAAf,CAAiBiK,QAAjB,CAA0B,CAA1B;;AACA,WAAKnB,SAAL,CAAevI,CAAf,CAAiB0J,QAAjB,CAA0B1J,CAA1B;AACD;AACF;;AAED6J,EAAAA,cAAc,CAAC;AAAEpK,IAAAA,CAAF;AAAKO,IAAAA;AAAL,GAAD,EAAW;AACvB,SAAKwI,WAAL,CAAiB/I,CAAjB,CAAmBiK,QAAnB,CAA4BjK,CAAC,IAAI,CAAjC;;AACA,SAAK+I,WAAL,CAAiBxI,CAAjB,CAAmB0J,QAAnB,CAA4B1J,CAAC,IAAI,CAAjC;AACD;;AA7VkC;;gBAA/BoE,Y,kBACkB;AACpBU,EAAAA,QAAQ,EAAE,GADU;AAEpBqD,EAAAA,WAAW,EAAE,IAFO;AAGpBtD,EAAAA,eAAe,EAAE;AAAEpF,IAAAA,CAAC,EAAE,CAAL;AAAQO,IAAAA,CAAC,EAAE;AAAX;AAHG,C;;eA+VT;AACb8J,EAAAA,IAAI,EAAE1F;AADO,C","sourcesContent":["import React, { Component } from 'react';\nimport Animated from 'react-native-reanimated';\nimport { PanGestureHandler, State } from 'react-native-gesture-handler';\nimport _ from 'lodash';\nconst {\n  add,\n  cond,\n  diff,\n  divide,\n  eq,\n  event,\n  exp,\n  lessThan,\n  and,\n  call,\n  block,\n  multiply,\n  pow,\n  set,\n  abs,\n  clockRunning,\n  greaterOrEq,\n  lessOrEq,\n  sqrt,\n  startClock,\n  stopClock,\n  sub,\n  Clock,\n  Value,\n  onChange,\n} = Animated;\n\nconst ANIMATOR_PAUSE_CONSECUTIVE_FRAMES = 10;\nconst ANIMATOR_PAUSE_ZERO_VELOCITY = 1;\nconst DEFAULT_SNAP_TENSION = 300;\nconst DEFAULT_SNAP_DAMPING = 0.7;\nconst DEFAULT_GRAVITY_STRENGTH = 400;\nconst DEFAULT_GRAVITY_FALLOF = 40;\n\nfunction sq(x) {\n  return multiply(x, x);\n}\n\nfunction influenceAreaWithRadius(radius, anchor) {\n  return {\n    left: (anchor.x || 0) - radius,\n    right: (anchor.x || 0) + radius,\n    top: (anchor.y || 0) - radius,\n    bottom: (anchor.y || 0) + radius,\n  };\n}\n\nfunction snapTo(target, snapPoints, best, clb, dragClb) {\n  const dist = new Value(0);\n  const snap = (pt) => [\n    set(best.tension, pt.tension || DEFAULT_SNAP_TENSION),\n    set(best.damping, pt.damping || DEFAULT_SNAP_DAMPING),\n    set(best.x, pt.x || 0),\n    set(best.y, pt.y || 0),\n  ];\n  const snapDist = (pt) =>\n    add(sq(sub(target.x, pt.x || 0)), sq(sub(target.y, pt.y || 0)));\n  return [\n    set(dist, snapDist(snapPoints[0])),\n    ...snap(snapPoints[0]),\n    ...snapPoints.map((pt) => {\n      const newDist = snapDist(pt);\n      return cond(lessThan(newDist, dist), [set(dist, newDist), ...snap(pt)]);\n    }),\n    (clb || dragClb) &&\n      call([best.x, best.y, target.x, target.y], ([bx, by, x, y]) => {\n        snapPoints.forEach((pt, index) => {\n          if (\n            (pt.x === undefined || pt.x === bx) &&\n            (pt.y === undefined || pt.y === by)\n          ) {\n            clb && clb({ nativeEvent: { ...pt, index } });\n            dragClb &&\n              dragClb({\n                nativeEvent: { x, y, targetSnapPointId: pt.id, state: 'end' },\n              });\n          }\n        });\n      }),\n  ];\n}\n\nfunction springBehavior(dt, target, obj, anchor, tension = 300) {\n  const dx = sub(target.x, anchor.x);\n  const ax = divide(multiply(-1, tension, dx), obj.mass);\n  const dy = sub(target.y, anchor.y);\n  const ay = divide(multiply(-1, tension, dy), obj.mass);\n  return {\n    x: set(obj.vx, add(obj.vx, multiply(dt, ax))),\n    y: set(obj.vy, add(obj.vy, multiply(dt, ay))),\n  };\n}\n\nfunction frictionBehavior(dt, target, obj, damping = 0.7) {\n  const friction = pow(damping, multiply(60, dt));\n  return {\n    x: set(obj.vx, multiply(obj.vx, friction)),\n    y: set(obj.vy, multiply(obj.vy, friction)),\n  };\n}\n\nfunction anchorBehavior(dt, target, obj, anchor) {\n  const dx = sub(anchor.x, target.x);\n  const dy = sub(anchor.y, target.y);\n  return {\n    x: set(obj.vx, divide(dx, dt)),\n    y: set(obj.vy, divide(dy, dt)),\n  };\n}\n\nfunction gravityBehavior(\n  dt,\n  target,\n  obj,\n  anchor,\n  strength = DEFAULT_GRAVITY_STRENGTH,\n  falloff = DEFAULT_GRAVITY_FALLOF\n) {\n  const dx = sub(target.x, anchor.x);\n  const dy = sub(target.y, anchor.y);\n  const drsq = add(sq(dx), sq(dy));\n  const dr = sqrt(drsq);\n  const a = divide(\n    multiply(-1, strength, dr, exp(divide(multiply(-0.5, drsq), sq(falloff)))),\n    obj.mass\n  );\n  const div = divide(a, dr);\n  return {\n    x: cond(dr, set(obj.vx, add(obj.vx, multiply(dt, dx, div)))),\n    y: cond(dr, set(obj.vy, add(obj.vy, multiply(dt, dy, div)))),\n  };\n}\n\nfunction bounceBehavior(dt, target, obj, area, bounce = 0) {\n  const xnodes = [];\n  const ynodes = [];\n  const flipx = set(obj.vx, multiply(-1, obj.vx, bounce));\n  const flipy = set(obj.vy, multiply(-1, obj.vy, bounce));\n  if (area.left !== undefined) {\n    xnodes.push(cond(and(eq(target.x, area.left), lessThan(obj.vx, 0)), flipx));\n  }\n  if (area.right !== undefined) {\n    xnodes.push(\n      cond(and(eq(target.x, area.right), lessThan(0, obj.vx)), flipx)\n    );\n  }\n  if (area.top !== undefined) {\n    xnodes.push(cond(and(eq(target.y, area.top), lessThan(obj.vy, 0)), flipy));\n  }\n  if (area.bottom !== undefined) {\n    xnodes.push(\n      cond(and(eq(target.y, area.bottom), lessThan(0, obj.vy)), flipy)\n    );\n  }\n  return {\n    x: xnodes,\n    y: ynodes,\n  };\n}\n\nfunction withInfluence(area, target, behavior) {\n  if (!area) {\n    return behavior;\n  }\n  const testLeft = area.left === undefined || lessOrEq(area.left, target.x);\n  const testRight = area.right === undefined || lessOrEq(target.x, area.right);\n  const testTop = area.top === undefined || lessOrEq(area.top, target.y);\n  const testBottom =\n    area.bottom === undefined || lessOrEq(target.y, area.bottom);\n  const testNodes = [testLeft, testRight, testTop, testBottom].filter(\n    (t) => t !== true\n  );\n  const test = and(...testNodes);\n  return {\n    x: cond(test, behavior.x),\n    y: cond(test, behavior.y),\n  };\n}\n\nfunction withLimits(value, lowerBound, upperBound) {\n  let result = value;\n  if (lowerBound !== undefined) {\n    result = cond(lessThan(value, lowerBound), lowerBound, result);\n  }\n  if (upperBound !== undefined) {\n    result = cond(lessThan(upperBound, value), upperBound, result);\n  }\n  return result;\n}\n\nclass Interactable extends Component {\n  static defaultProps = {\n    dragToss: 0.1,\n    dragEnabled: true,\n    initialPosition: { x: 0, y: 0 },\n  };\n\n  constructor(props) {\n    super(props);\n    this.gesture = { x: new Value(0), y: new Value(0) };\n    this.state = new Value(-1);\n    this._onGestureEvent = event([\n      {\n        nativeEvent: {\n          translationX: this.gesture.x,\n          translationY: this.gesture.y,\n          state: this.state,\n        },\n      },\n    ]);\n    this.target = {\n      x: new Value(props.initialPosition.x || 0),\n      y: new Value(props.initialPosition.y || 0),\n    };\n    this.snapAnchor = {\n      x: new Value(props.initialPosition.x || 0),\n      y: new Value(props.initialPosition.y || 0),\n      tension: new Value(DEFAULT_SNAP_TENSION),\n      damping: new Value(DEFAULT_SNAP_DAMPING),\n    };\n\n    this.initialize(props);\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (!_.isEqual(nextProps.snapPoints, this.props.snapPoints)) {\n      this.initialize(nextProps);\n    }\n  }\n\n  initialize = (props) => {\n    const update = {\n      x: props.animatedValueX,\n      y: props.animatedValueY,\n    };\n\n    const clock = new Clock();\n\n    const dt = divide(diff(clock), 1000);\n\n    const obj = {\n      vx: new Value(0),\n      vy: new Value(0),\n      mass: 1,\n    };\n\n    const tossedTarget = {\n      x: add(\n        new Value(props.initialPosition.x || 0),\n        multiply(props.dragToss, obj.vx)\n      ),\n      y: add(this.target.y, multiply(props.dragToss, obj.vy)),\n    };\n\n    const permBuckets = [[], [], []];\n\n    const addSpring = (anchor, tension, influence, buckets = permBuckets) => {\n      buckets[0].push(\n        withInfluence(\n          influence,\n          this.target,\n          springBehavior(dt, this.target, obj, anchor, tension)\n        )\n      );\n    };\n\n    const addFriction = (damping, influence, buckets = permBuckets) => {\n      buckets[1].push(\n        withInfluence(\n          influence,\n          this.target,\n          frictionBehavior(dt, this.target, obj, damping)\n        )\n      );\n    };\n\n    const addGravity = (\n      anchor,\n      strength,\n      falloff,\n      influence,\n      buckets = permBuckets\n    ) => {\n      buckets[0].push(\n        withInfluence(\n          influence,\n          this.target,\n          gravityBehavior(dt, this.target, obj, anchor, strength, falloff)\n        )\n      );\n    };\n\n    const dragAnchor = { x: new Value(0), y: new Value(0) };\n    const dragBuckets = [[], [], []];\n    if (props.dragWithSpring) {\n      const { tension, damping } = props.dragWithSpring;\n      addSpring(dragAnchor, tension, null, dragBuckets);\n      addFriction(damping, null, dragBuckets);\n    } else {\n      dragBuckets[0].push(anchorBehavior(dt, this.target, obj, dragAnchor));\n    }\n\n    const handleStartDrag =\n      props.onDrag &&\n      call([this.target.x, this.target.y], ([x, y]) =>\n        props.onDrag({ nativeEvent: { x, y, state: 'start' } })\n      );\n\n    const snapBuckets = [[], [], []];\n\n    const updateSnapTo = snapTo(\n      tossedTarget,\n      props.snapPoints,\n      this.snapAnchor,\n      props.onSnap,\n      props.onDrag\n    );\n\n    addSpring(this.snapAnchor, this.snapAnchor.tension, null, snapBuckets);\n    addFriction(this.snapAnchor.damping, null, snapBuckets);\n\n    if (props.springPoints) {\n      props.springPoints.forEach((pt) => {\n        addSpring(pt, pt.tension, pt.influenceArea);\n        if (pt.damping) {\n          addFriction(pt.damping, pt.influenceArea);\n        }\n      });\n    }\n    if (props.gravityPoints) {\n      props.gravityPoints.forEach((pt) => {\n        const falloff = pt.falloff || DEFAULT_GRAVITY_FALLOF;\n        addGravity(pt, pt.strength, falloff, pt.influenceArea);\n        if (pt.damping) {\n          const influenceArea =\n            pt.influenceArea || influenceAreaWithRadius(1.4 * falloff, pt);\n          addFriction(pt.damping, influenceArea);\n        }\n      });\n    }\n    if (props.frictionAreas) {\n      props.frictionAreas.forEach((pt) => {\n        addFriction(pt.damping, pt.influenceArea);\n      });\n    }\n    if (props.boundaries) {\n      snapBuckets[0].push(\n        bounceBehavior(\n          dt,\n          this.target,\n          obj,\n          props.boundaries,\n          props.boundaries.bounce\n        )\n      );\n    }\n\n    // behaviors can go under one of three buckets depending on their priority\n    // we append to each bucket but in Interactable behaviors get added to the\n    // front, so we join in reverse order and then reverse the array.\n    const sortBuckets = (specialBuckets) => ({\n      x: specialBuckets\n        .map((b, idx) => [...permBuckets[idx], ...b].reverse().map((b) => b.x))\n        .reduce((acc, b) => acc.concat(b), []),\n      y: specialBuckets\n        .map((b, idx) => [...permBuckets[idx], ...b].reverse().map((b) => b.y))\n        .reduce((acc, b) => acc.concat(b), []),\n    });\n    const dragBehaviors = sortBuckets(dragBuckets);\n    const snapBehaviors = sortBuckets(snapBuckets);\n\n    const noMovementFrames = {\n      x: new Value(\n        props.verticalOnly ? ANIMATOR_PAUSE_CONSECUTIVE_FRAMES + 1 : 0\n      ),\n      y: new Value(\n        props.horizontalOnly ? ANIMATOR_PAUSE_CONSECUTIVE_FRAMES + 1 : 0\n      ),\n    };\n\n    const stopWhenNeeded = cond(\n      and(\n        greaterOrEq(noMovementFrames.x, ANIMATOR_PAUSE_CONSECUTIVE_FRAMES),\n        greaterOrEq(noMovementFrames.y, ANIMATOR_PAUSE_CONSECUTIVE_FRAMES)\n      ),\n      [\n        props.onStop\n          ? cond(\n              clockRunning(clock),\n              call([this.target.x, this.target.y], ([x, y]) =>\n                props.onStop({ nativeEvent: { x, y } })\n              )\n            )\n          : undefined,\n        stopClock(clock),\n      ],\n      startClock(clock)\n    );\n\n    const trans = (axis, vaxis, lowerBound, upperBound) => {\n      const dragging = new Value(0);\n      const start = new Value(0);\n      const x = this.target[axis];\n      const vx = obj[vaxis];\n      const anchor = dragAnchor[axis];\n      const drag = this.gesture[axis];\n      let advance = cond(\n        lessThan(abs(vx), ANIMATOR_PAUSE_ZERO_VELOCITY),\n        x,\n        add(x, multiply(vx, dt))\n      );\n      if (props.boundaries) {\n        advance = withLimits(\n          advance,\n          props.boundaries[lowerBound],\n          props.boundaries[upperBound]\n        );\n      }\n      const last = new Value(Number.MAX_SAFE_INTEGER);\n      const noMoveFrameCount = noMovementFrames[axis];\n      const testMovementFrames = block([\n        onChange(this.snapAnchor.x, set(last, Number.MAX_SAFE_INTEGER)),\n        onChange(this.snapAnchor.y, set(last, Number.MAX_SAFE_INTEGER)),\n        cond(\n          eq(advance, last),\n          set(noMoveFrameCount, add(noMoveFrameCount, 1)),\n          [set(last, advance), set(noMoveFrameCount, 0)]\n        ),\n      ]);\n      const step = cond(\n        eq(this.state, State.ACTIVE),\n        [\n          cond(dragging, 0, [\n            handleStartDrag,\n            startClock(clock),\n            set(dragging, 1),\n            set(start, x),\n          ]),\n          set(anchor, add(start, drag)),\n          cond(dt, dragBehaviors[axis]),\n        ],\n        [\n          cond(dragging, [updateSnapTo, set(dragging, 0)]),\n          cond(dt, snapBehaviors[axis]),\n          testMovementFrames,\n          stopWhenNeeded,\n        ]\n      );\n      const wrapStep = props.dragEnabled\n        ? cond(props.dragEnabled, step, [set(dragging, 1), stopClock(clock)])\n        : step;\n\n      // export some values to be available for imperative commands\n      this._dragging[axis] = dragging;\n      this._velocity[axis] = vx;\n\n      // update animatedValueX/animatedValueY\n      const doUpdateAnReturn = update[axis] ? set(update[axis], x) : x;\n\n      return block([wrapStep, set(x, advance), doUpdateAnReturn]);\n    };\n\n    // variables to be used to access reanimated values from imperative commands\n    this._dragging = {};\n    this._velocity = {};\n    this._position = this.target;\n    this._snapAnchor = this.snapAnchor;\n\n    this._transX = trans('x', 'vx', 'left', 'right');\n    this._transY = trans('y', 'vy', 'top', 'bottom');\n  };\n\n  render() {\n    const { children, style, horizontalOnly, verticalOnly } = this.props;\n    return (\n      <PanGestureHandler\n        maxPointers={1}\n        minDist={10}\n        enabled={this.props.dragEnabled}\n        onGestureEvent={this._onGestureEvent}\n        onHandlerStateChange={this._onGestureEvent}\n      >\n        <Animated.View\n          style={[\n            style,\n            {\n              transform: [\n                { translateX: verticalOnly ? 0 : this._transX },\n                { translateY: horizontalOnly ? 0 : this._transY },\n              ],\n            },\n          ]}\n        >\n          {children}\n        </Animated.View>\n      </PanGestureHandler>\n    );\n  }\n\n  // imperative commands\n  setVelocity({ x, y }) {\n    if (x !== undefined) {\n      this._dragging.x.setValue(1);\n      this._velocity.x.setValue(x);\n    }\n    if (y !== undefined) {\n      this._dragging.y.setValue(1);\n      this._velocity.y.setValue(y);\n    }\n  }\n\n  snapTo({ index }) {\n    const snapPoint = this.props.snapPoints[index];\n    this._snapAnchor.tension.setValue(\n      snapPoint.tension || DEFAULT_SNAP_TENSION\n    );\n    this._snapAnchor.damping.setValue(\n      snapPoint.damping || DEFAULT_SNAP_DAMPING\n    );\n    this._snapAnchor.x.setValue(snapPoint.x || 0);\n    this._snapAnchor.y.setValue(snapPoint.y || 0);\n    this.props.onSnap &&\n      this.props.onSnap({ nativeEvent: { ...snapPoint, index } });\n  }\n\n  changePosition({ x, y }) {\n    if (x !== undefined) {\n      this._dragging.x.setValue(1);\n      this._position.x.setValue(x);\n    }\n    if (y !== undefined) {\n      this._dragging.x.setValue(1);\n      this._position.y.setValue(y);\n    }\n  }\n\n  snapToPosition({ x, y }) {\n    this._snapAnchor.x.setValue(x || 0);\n    this._snapAnchor.y.setValue(y || 0);\n  }\n}\n\nexport default {\n  View: Interactable,\n};\n"]}